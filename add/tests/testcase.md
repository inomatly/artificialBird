
# 仕様

※単体テスト仕様と設計上の仕様を兼任するメモとする。

## テスト化しない仕様

- 送信機の機能は，ボタン読み込み（上下左右に対応する4つ）と送信（赤外線LEDのOUTPUT, 10個のLED全てで共通の信号を送信）とする。
- 受信機の機能は，受信，モータ制御（サーボモータは制御2つ分，直流モータ制御1つ）とする。
- ~~GPIOのOUTPUTのON-OFF，toggleは，IDEが生成する，ドライバーに相当するマクロ関数を使用する。~~
- 直流モータの制御はトランジスタによる電気式スイッチへPWMで送ることとし，直流モータは電源から直接動力を得るとする。

## テスト化する仕様(受信機)

- 周期OOでセンサ値を読み込む(タイマ割り込み)。
- 過去10回のセンサ値を，配列として先入先出で保持する。
- モータ制御信号を解析し，モータ設定値変数を更新する。
- モータ設定値変数を元に，常にモータに指令信号を送り続ける。（ポーリング処理）
- モータのうち，サーボモータはPWM制御で角度を制御することとする。
- モータのうち，直流モータはPWM制御で電圧を制御することとする。


### LEDドライバ

- ~~LEDがON-OFFできる。~~
- ~~入力によりON, OFF, TOGGLEを操作できる。~~
- 複数(10個)のLEDを同時に操作できる。
- タイマ割り込み周期に合わせて信号のONOFFを更新する
- 信号列に合わせてLEDをON-OFFする。

### モータードライブ

#### 済

#### 未

- PWMで出力する（LED）
- PWMで出力する（モーター直接）
    - 1、
    - 2、360度回転：PWM 500〜2500μSで、サーボは連続的に回転し、回転速度と方向を制御できます。 たとえば、500 ～ 1500μS の場合、サーボは時計回りに回転します。μS の値が小さいほど、速度は高くなります。 1500μS〜2500μS、サーボは反時計回りに回転し、μSの値が大きくなるほど回転速度が高くなります。

- トランジスタをかませる

- 受信の動作試験
- DCモータの動作試験
- タイマ割り込みで光らせながら，PWMの調査
    - PWM信号の生成は、通常、ハードウェアモジュール（例えば、PICマイコンのCCP/PWMモジュール）によって行われます。これにより、PWM信号の生成はCPUとは独立して動作し、タイマ割り込みやその他の割り込み処理が行われている間も、PWM信号は正常に出力されます。

- 回路作成

- 結合
    - ~~LEDで可視光で，タイマ割り込み1Sとかで実装してみる。~~
- ch1~終端信号まで終わったら，UpdateSignalRowで配列を更新する。たしか未実装のはず。

- アソシエイト



## memo 

1. v6のMPLABでMCCで設定し，データを生成する。
2. テストのパスに追加する。
3. v5のMPLABでMCCで追加されたデータをフォルダに追加する。
4. 